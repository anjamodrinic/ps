public class FrmAddPerson extends javax.swing.JPanel {

    /**
     * Creates new form FrmAddPerson
     */
    public FrmAddPerson() throws SQLException {
        initComponents();
        prepareView();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
    private void initComponents() {

        buttonGroupGender = new javax.swing.ButtonGroup();
        labelFirstname = new javax.swing.JLabel();
        txtFirstname = new javax.swing.JTextField();
        labelLastname = new javax.swing.JLabel();
        txtLastname = new javax.swing.JTextField();
        labelGender = new javax.swing.JLabel();
        radioButtonFemale = new javax.swing.JRadioButton();
        radioButtonMale = new javax.swing.JRadioButton();
        labelBirthday = new javax.swing.JLabel();
        txtBirthday = new javax.swing.JTextField();
        labelMarried = new javax.swing.JLabel();
        checkBoxMarried = new javax.swing.JCheckBox();
        labelCity = new javax.swing.JLabel();
        comboBoxCity = new javax.swing.JComboBox<>();
        btnAddPerson = new javax.swing.JButton();

        labelFirstname.setText("First name:");

        labelLastname.setText("Last name:");

        labelGender.setText("Gender:");

        radioButtonFemale.setText("Female");

        radioButtonMale.setText("Male");

        labelBirthday.setText("Birthday:");

        labelMarried.setText("Marriage status:");

        checkBoxMarried.setText("Married");

        labelCity.setText("City:");

        comboBoxCity.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Item 1", "Item 2", "Item 3", "Item 4" }));

        btnAddPerson.setText("Add person");
        btnAddPerson.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnAddPersonActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(labelFirstname)
                        .addGap(32, 32, 32)
                        .addComponent(txtFirstname))
                    .addGroup(layout.createSequentialGroup()
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(labelLastname)
                            .addComponent(labelGender)
                            .addComponent(labelBirthday)
                            .addComponent(labelMarried)
                            .addComponent(labelCity))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(txtLastname)
                            .addComponent(txtBirthday, javax.swing.GroupLayout.Alignment.TRAILING)
                            .addGroup(layout.createSequentialGroup()
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addGroup(layout.createSequentialGroup()
                                        .addComponent(radioButtonFemale)
                                        .addGap(18, 18, 18)
                                        .addComponent(radioButtonMale))
                                    .addComponent(checkBoxMarried, javax.swing.GroupLayout.PREFERRED_SIZE, 230, javax.swing.GroupLayout.PREFERRED_SIZE))
                                .addGap(0, 68, Short.MAX_VALUE))
                            .addComponent(comboBoxCity, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                        .addGap(0, 0, Short.MAX_VALUE)
                        .addComponent(btnAddPerson)))
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(labelFirstname)
                    .addComponent(txtFirstname, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(labelLastname)
                    .addComponent(txtLastname, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(labelGender)
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(radioButtonFemale)
                        .addComponent(radioButtonMale)))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(labelBirthday)
                    .addComponent(txtBirthday, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(labelMarried)
                    .addComponent(checkBoxMarried))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(labelCity)
                    .addComponent(comboBoxCity, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addComponent(btnAddPerson)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
    }// </editor-fold>                        

    private void btnAddPersonActionPerformed(java.awt.event.ActionEvent evt) {                                             
        // TODO add your handling code here:
    }                                            


    // Variables declaration - do not modify                     
    private javax.swing.JButton btnAddPerson;
    private javax.swing.ButtonGroup buttonGroupGender;
    private javax.swing.JCheckBox checkBoxMarried;
    private javax.swing.JComboBox<Object> comboBoxCity;
    private javax.swing.JLabel labelBirthday;
    private javax.swing.JLabel labelCity;
    private javax.swing.JLabel labelFirstname;
    private javax.swing.JLabel labelGender;
    private javax.swing.JLabel labelLastname;
    private javax.swing.JLabel labelMarried;
    private javax.swing.JRadioButton radioButtonFemale;
    private javax.swing.JRadioButton radioButtonMale;
    private javax.swing.JTextField txtBirthday;
    private javax.swing.JTextField txtFirstname;
    private javax.swing.JTextField txtLastname;
    // End of variables declaration                   

    private void prepareView() throws SQLException {
        prepareButtonGroupGender();
        populateCities();
    }

    private void prepareButtonGroupGender() {
        buttonGroupGender.add(radioButtonFemale);
        buttonGroupGender.add(radioButtonMale);
    }

    private void populateCities() throws SQLException {
        DatabaseRepository db=new DatabaseRepository();
        try {
            db.connect();
            List<City> cities=db.getCities();
            db.commit();
            
            comboBoxCity.setModel(new DefaultComboBoxModel(cities.toArray()));
            
        } catch (SQLException ex) {
            ex.printStackTrace();
            db.rollback();
            throw ex;
        }finally{
            db.disconnect();
        }
    }
}
